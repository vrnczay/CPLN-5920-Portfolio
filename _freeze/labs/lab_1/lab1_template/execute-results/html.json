{
  "hash": "73580c4de57a3a3878c80e136accf970",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 1: Census Data Quality for Policy Decisions\"\nsubtitle: \"Evaluating Data Reliability for Algorithmic Decision-Making\"\nauthor: \"Your Name Here\"\ndate: today\nformat: \n  html:\n    code-fold: false\n    toc: true\n    toc-location: left\n    theme: cosmo\nexecute:\n  warning: false\n  message: false\neditor: \n  markdown: \n    wrap: 72\n---\n\n# Assignment Overview\n\n## Scenario\n\nYou are a data analyst for the **California Department of Human Services**. The department is considering implementing an algorithmic system to identify communities that should receive priority for social service funding and outreach programs. Your supervisor has asked you to evaluate the quality and reliability of available census data to inform this decision.\n\nDrawing on our Week 2 discussion of algorithmic bias, you need to assess not just what the data shows, but how reliable it is and what communities might be affected by data quality issues.\n\n## Learning Objectives\n\n-   Apply dplyr functions to real census data for policy analysis\n-   Evaluate data quality using margins of error\n-   Connect technical analysis to algorithmic decision-making\n-   Identify potential equity implications of data reliability issues\n-   Create professional documentation for policy stakeholders\n\n## Submission Instructions\n\n**Submit by posting your updated portfolio link on Canvas.** Your assignment should be accessible at `your-portfolio-url/labs/lab_1/`\n\nMake sure to update your `_quarto.yml` navigation to include this assignment under an \"Labs\" menu.\n\n# Part 1: Portfolio Integration\n\nCreate this assignment in your portfolio repository under an `labs/lab_1/` folder structure. Update your navigation menu to include:\n\n```         \n- text: Assignments\n  menu:\n    - href: labs/lab_1/your_file_name.qmd\n      text: \"Lab 1: Census Data Exploration\"\n```\n\nIf there is a special character like a colon, you need use double quote mark so that the quarto can identify this as text \n\n# Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required packages (hint: you need tidycensus, tidyverse, and knitr)\nlibrary(tidycensus)\nlibrary(tidyverse)\nlibrary(knitr)\n# Set your Census API key\ncensus_api_key(\"1580dabad835478ae3a677b86254a17c8e2ce894\")\n\n# Choose your state for analysis - assign it to a variable called my_state\nmy_state <- \"California\"\n```\n:::\n\n\n**State Selection:** I have chosen **California** for this analysis because: I lived in California for 3 years. Also, it has a very diverse population. California includes many large cities, suburban areas, and rural regions, which allows me to see differences between places.\n\n# Part 2: County-Level Resource Assessment\n\n## 2.1 Data Retrieval\n\n**Your Task:** Use `get_acs()` to retrieve county-level data for your chosen state.\n\n**Requirements:** - Geography: county level - Variables: median household income (B19013_001) and total population (B01003_001)\n- Year: 2022 - Survey: acs5 - Output format: wide\n\n**Hint:** Remember to give your variables descriptive names using the`variables = c(name = \"code\")` syntax.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Write your get_acs() code here\nCA_data <- get_acs(\n  geography = \"county\",\n  state = my_state,\n  variables = c(\n    median_hh_income = \"B19013_001\",\n    total_population = \"B01003_001\"\n  ),\n  year = 2022,\n  survey = \"acs5\",\n  output=\"wide\"\n)\n\n# Clean the county names to remove state name and \"County\" \n# Hint: use mutate() with str_remove()\nCA_clean <- CA_data %>%\n  mutate(\n    county = NAME %>%\n      str_remove(\",\\\\s*California$\") %>% \n      str_remove(\"\\\\s*County$\")\n  )\n\n\n# Display the first few rows\nhead(CA_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 7\n  GEOID NAME               median_hh_incomeE median_hh_incomeM total_populationE\n  <chr> <chr>                          <dbl>             <dbl>             <dbl>\n1 06001 Alameda County, C…            122488              1231           1663823\n2 06003 Alpine County, Ca…            101125             17442              1515\n3 06005 Amador County, Ca…             74853              6048             40577\n4 06007 Butte County, Cal…             66085              2261            213605\n5 06009 Calaveras County,…             77526              3875             45674\n6 06011 Colusa County, Ca…             69619              5745             21811\n# ℹ 2 more variables: total_populationM <dbl>, county <chr>\n```\n\n\n:::\n:::\n\n\n## 2.2 Data Quality Assessment\n\n**Your Task:** Calculate margin of error percentages and create reliability categories.\n\n**Requirements:** - Calculate MOE percentage: (margin of error / estimate) * 100 - Create reliability categories:\n- High Confidence: MOE < 5%  \n- Moderate Confidence: MOE 5-10%\n- Low Confidence: MOE > 10% \n- Create a flag for unreliable estimates (MOE > 10%)\n\n**Hint:** Use `mutate()` with `case_when()` for the categories.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate MOE percentage and reliability categories using mutate()\nCA_data_quality <- CA_clean %>%\n  mutate(\n    # MOE percentage\n    income_moe_pct = ((median_hh_incomeM / median_hh_incomeE) * 100),\n\n    # reliability\n    income_reliability = case_when(\n      income_moe_pct < 5 ~ \"High Confidence\",\n      income_moe_pct >= 5 & income_moe_pct <= 10 ~ \"Moderate Confidence\",\n      income_moe_pct > 10 ~ \"Low Confidence\"\n    ),\n\n    # Flag unreliable\n    income_unreliable = income_moe_pct > 10\n  )\n# Create a summary showing count of counties in each reliability category\n# Hint: use count() and mutate() to add percentages\nincome_reliability_summary <- CA_data_quality %>%\n  count(income_reliability) %>%\n  mutate(percent = round(n / sum(n) * 100, 1))\n```\n:::\n\n\n## 2.3 High Uncertainty Counties\n\n**Your Task:** Identify the 5 counties with the highest MOE percentages.\n\n**Requirements:** - Sort by MOE percentage (highest first) - Select the top 5 counties - Display: county name, median income, margin of error, MOE percentage, reliability category - Format as a professional table using `kable()`\n\n**Hint:** Use `arrange()`, `slice()`, and `select()` functions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create table of top 5 counties by MOE percentage\nhigh_uncertainty <- CA_data_quality %>%\n  arrange(desc(income_moe_pct)) %>%\n  slice(1:5) %>%\n  select(\n    county,\n    median_hh_incomeE,\n    median_hh_incomeM,\n    income_moe_pct,\n    income_reliability\n  )\n# Format as table with kable() - include appropriate column names and caption\nhigh_uncertainty %>%\n  kable(\n    col.names = c(\"County\", \"Median Income\", \"Margin of Error\", \"MOE (%)\", \"Reliability Category\"),\n    caption = \"Top 5 California Counties with Highest MOE Percentage (Median Household Income, ACS 2022 5-year)\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Top 5 California Counties with Highest MOE Percentage (Median Household Income, ACS 2022 5-year)\n\n|County  | Median Income| Margin of Error|  MOE (%)|Reliability Category |\n|:-------|-------------:|---------------:|--------:|:--------------------|\n|Mono    |         82038|           15388| 18.75716|Low Confidence       |\n|Alpine  |        101125|           17442| 17.24796|Low Confidence       |\n|Sierra  |         61108|            9237| 15.11586|Low Confidence       |\n|Trinity |         47317|            5890| 12.44796|Low Confidence       |\n|Plumas  |         67885|            7772| 11.44877|Low Confidence       |\n\n\n:::\n:::\n\n\n**Data Quality Commentary:**\n\nThe results show that Mono, Alpine, Sierra, Trinity, and Plumas have high MOE percentages, so these counties' median income values are less reliable and they might be poorly served by algorithms that rely on this income data. Higher uncertainty can come from small population size in rural areas.\n\n# Part 3: Neighborhood-Level Analysis\n\n## 3.1 Focus Area Selection\n\n**Your Task:** Select 2-3 counties from your reliability analysis for detailed tract-level study.\n\n**Strategy:** Choose counties that represent different reliability levels (e.g., 1 high confidence, 1 moderate, 1 low confidence) to compare how data quality varies.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Use filter() to select 2-3 counties from your county_reliability data\n# Store the selected counties in a variable called selected_counties\n\nselected_counties <- bind_rows(\n  CA_data_quality %>%\n    filter(income_reliability == \"High Confidence\") %>%\n    sample_n(1),\n\n  CA_data_quality %>%\n    filter(income_reliability == \"Moderate Confidence\") %>%\n    sample_n(1),\n\n  CA_data_quality %>%\n    filter(income_reliability == \"Low Confidence\") %>%\n    sample_n(1),\n)\nset.seed(123)\n\n# Display the selected counties with their key characteristics\n# Show: county name, median income, MOE percentage, reliability category\nselected_counties %>%\n  select(\n    county,\n    median_hh_incomeE,\n    median_hh_incomeM,\n    income_moe_pct,\n    income_reliability\n  ) %>%\n  kable(\n    col.names = c(\"County\", \"Median Income\", \"Margin of Error\", \"MOE (%)\", \"Reliability Category\"),\n    caption = \"Selected California Counties for Tract-Level Study in Different Reliability Levels\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Selected California Counties for Tract-Level Study in Different Reliability Levels\n\n|County | Median Income| Margin of Error|   MOE (%)|Reliability Category |\n|:------|-------------:|---------------:|---------:|:--------------------|\n|Butte  |         66085|            2261|  3.421351|High Confidence      |\n|Colusa |         69619|            5745|  8.252058|Moderate Confidence  |\n|Alpine |        101125|           17442| 17.247960|Low Confidence       |\n\n\n:::\n:::\n\n\n**Comment on the output:** The three counties represent different levels of data reliability. I used random selection within each reliability category to choose one county, and I set a seed to allow program to memorize the selection. This means I get the same three counties each time I run the code. This process reduces selection bias and to make the output reproducible.\n\n## 3.2 Tract-Level Demographics\n\n**Your Task:** Get demographic data for census tracts in your selected counties.\n\n**Requirements:** \n- Geography: tract level \n- Variables: white alone (B03002_003), Black/African American (B03002_004), Hispanic/Latino (B03002_012), total population (B03002_001)\n- Use the same state and year as before \n- Output format: wide \n- **Challenge:** You'll need county codes, not names. Look at the GEOID patterns in your county data for hints.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define your race/ethnicity variables with descriptive names\nCA_race <- c(\n  total_pop = \"B03002_001\",\n  white = \"B03002_003\",\n  black = \"B03002_004\",\n  hispanic = \"B03002_012\"\n)\nCA_county_codes <- selected_counties %>%\n  mutate(county_fips = str_sub(GEOID, 3, 5)) %>%   # take the 3-digit county code\n  pull(county_fips)\n# Use get_acs() to retrieve tract-level data\n# Hint: You may need to specify county codes in the county parameter\nCA_race_tract <- get_acs(\n  geography=\"tract\",\n  state=my_state,\n  county= CA_county_codes,\n  variables=CA_race,\n  year=2022,\n  survey=\"acs5\",\n  output=\"wide\"\n)\n\n# Calculate percentage of each group using mutate()\n# Create percentages for white, Black, and Hispanic populations\nCA_race_tract_clean <- CA_race_tract %>%\n  mutate(\n    pct_white = round((whiteE / total_popE) * 100, 2),\n    pct_black = round((blackE / total_popE) * 100, 2),\n    pct_hispanic = round((hispanicE / total_popE) * 100, 2)\n  )\n\n# Add readable tract and county name columns using str_extract() or similar\nCA_race_tract_clean <- CA_race_tract_clean %>%\n  mutate(\n    county_fips = str_sub(GEOID, 3, 5),\n    tract_code = str_sub(GEOID, 6, 11),\n    county = str_remove(str_extract(NAME, \".*?County\"), \" County\")\n  )\nCA_race_tract_clean %>%\n  select(county, tract_code, total_popE, pct_white, pct_black, pct_hispanic) %>%\n  head() %>%\n  kable(digits = 1)\n```\n\n::: {.cell-output-display}\n\n\n|county                   |tract_code | total_popE| pct_white| pct_black| pct_hispanic|\n|:------------------------|:----------|----------:|---------:|---------:|------------:|\n|Census Tract 100; Alpine |010000     |       1515|      58.1|       0.0|         14.1|\n|Census Tract 1.02; Butte |000102     |       4266|      65.9|       0.2|         14.3|\n|Census Tract 1.03; Butte |000103     |       6322|      72.2|       0.5|         13.8|\n|Census Tract 1.04; Butte |000104     |       5873|      64.6|       2.8|         25.5|\n|Census Tract 2.01; Butte |000201     |       4140|      76.9|       0.4|         14.9|\n|Census Tract 2.02; Butte |000202     |       3706|      63.0|       1.1|         15.7|\n\n\n:::\n:::\n\n\n## 3.3 Demographic Analysis\n\n**Your Task:** Analyze the demographic patterns in your selected areas.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Find the tract with the highest percentage of Hispanic/Latino residents\n# Hint: use arrange() and slice() to get the top tract\ntop_hispanic_tract <- CA_race_tract_clean %>%\n  arrange(desc(pct_hispanic)) %>%\n  slice(1) %>%\n  select(county, tract_code, total_popE, pct_white, pct_black, pct_hispanic)\n\ntop_hispanic_tract %>%\n  kable(\n    col.names = c(\"County\", \"Tract\", \"Total Population\", \"% White\", \"% Black\", \"% Hispanic/Latino\"),\n    caption = \"Tract with the Highest Percentage of Hispanic/Latino Residents (ACS 2022 5-year)\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Tract with the Highest Percentage of Hispanic/Latino Residents (ACS 2022 5-year)\n\n|County                    |Tract  | Total Population| % White| % Black| % Hispanic/Latino|\n|:-------------------------|:------|----------------:|-------:|-------:|-----------------:|\n|Census Tract 3.01; Colusa |000301 |             4113|   15.17|       0|             83.35|\n\n\n:::\n\n```{.r .cell-code}\n# Calculate average demographics by county using group_by() and summarize()\n# Show: number of tracts, average percentage for each racial/ethnic group\ncounty_demographics_summary <- CA_race_tract_clean %>%\n  group_by(county) %>%\n  summarize(\n    tracts = n(),\n    avg_pct_white = (mean(pct_white, na.rm = TRUE)),\n    avg_pct_black = (mean(pct_black, na.rm = TRUE)),\n    avg_pct_hispanic = (mean(pct_hispanic, na.rm = TRUE)),\n    .groups = \"drop\"\n  )\n# Create a nicely formatted table of your results using kable()\ncounty_demographics_summary %>%\n  kable(\n    col.names = c(\"County\", \"Number of Tracts\", \"Avg % White\", \"Avg % Black\", \"Avg % Hispanic/Latino\"),\n    caption = \"Average Tract-Level Demographics by County (ACS 2022 5-year)\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Average Tract-Level Demographics by County (ACS 2022 5-year)\n\n|County                    | Number of Tracts| Avg % White| Avg % Black| Avg % Hispanic/Latino|\n|:-------------------------|----------------:|-----------:|-----------:|---------------------:|\n|Census Tract 1.02; Butte  |                1|       65.89|        0.23|                 14.35|\n|Census Tract 1.03; Butte  |                1|       72.16|        0.54|                 13.79|\n|Census Tract 1.04; Butte  |                1|       64.58|        2.84|                 25.51|\n|Census Tract 100; Alpine  |                1|       58.09|        0.00|                 14.06|\n|Census Tract 10; Butte    |                1|       69.01|        2.90|                 21.85|\n|Census Tract 11; Butte    |                1|       63.48|        0.19|                 26.29|\n|Census Tract 12; Butte    |                1|       65.01|        0.18|                 27.38|\n|Census Tract 13; Butte    |                1|       59.32|        4.10|                 19.40|\n|Census Tract 14; Butte    |                1|       82.07|        0.05|                 13.32|\n|Census Tract 15; Butte    |                1|       78.53|        4.38|                 11.52|\n|Census Tract 16.01; Butte |                1|       84.35|        0.00|                 12.62|\n|Census Tract 16.02; Butte |                1|       85.04|        0.35|                  5.16|\n|Census Tract 17.02; Butte |                1|       78.49|        0.00|                  5.26|\n|Census Tract 17.03; Butte |                1|       89.42|        0.00|                  6.94|\n|Census Tract 17.04; Butte |                1|       68.19|        0.13|                 21.90|\n|Census Tract 18; Butte    |                1|       76.84|        0.07|                  7.48|\n|Census Tract 19; Butte    |                1|       81.71|        1.69|                 13.72|\n|Census Tract 1; Colusa    |                1|       32.56|        0.00|                 61.21|\n|Census Tract 2.01; Butte  |                1|       76.88|        0.36|                 14.88|\n|Census Tract 2.02; Butte  |                1|       63.01|        1.08|                 15.70|\n|Census Tract 20; Butte    |                1|       91.52|        0.29|                  5.39|\n|Census Tract 21; Butte    |                1|       67.05|        1.58|                 11.63|\n|Census Tract 22; Butte    |                1|       90.66|        0.00|                  0.57|\n|Census Tract 23; Butte    |                1|       59.79|        0.05|                 34.83|\n|Census Tract 24.01; Butte |                1|       71.06|        0.00|                 15.35|\n|Census Tract 24.02; Butte |                1|       72.28|        3.69|                 11.03|\n|Census Tract 25; Butte    |                1|       54.87|        1.28|                 12.95|\n|Census Tract 26.01; Butte |                1|       68.35|        0.36|                 19.12|\n|Census Tract 26.02; Butte |                1|       78.57|        3.54|                  9.22|\n|Census Tract 27; Butte    |                1|       82.40|        0.30|                 11.99|\n|Census Tract 28; Butte    |                1|       57.56|       10.09|                 11.67|\n|Census Tract 29; Butte    |                1|       55.00|        0.86|                 12.86|\n|Census Tract 2; Colusa    |                1|       43.91|        2.55|                 48.50|\n|Census Tract 3.01; Colusa |                1|       15.17|        0.00|                 83.35|\n|Census Tract 3.02; Colusa |                1|       28.69|        0.17|                 67.73|\n|Census Tract 30.01; Butte |                1|       38.02|        6.24|                 18.89|\n|Census Tract 30.02; Butte |                1|       54.80|        0.19|                 27.04|\n|Census Tract 31; Butte    |                1|       72.30|        0.22|                 14.63|\n|Census Tract 32; Butte    |                1|       62.41|        0.25|                 26.09|\n|Census Tract 33; Butte    |                1|       60.65|        5.61|                 19.00|\n|Census Tract 34; Butte    |                1|       72.94|        0.00|                 18.49|\n|Census Tract 35.01; Butte |                1|       65.75|        0.00|                 26.65|\n|Census Tract 35.02; Butte |                1|       48.74|        0.10|                 50.26|\n|Census Tract 36; Butte    |                1|       65.63|        0.00|                 30.14|\n|Census Tract 37; Butte    |                1|       53.13|        0.31|                 24.19|\n|Census Tract 3; Butte     |                1|       67.06|        1.02|                 22.03|\n|Census Tract 4.01; Butte  |                1|       61.80|        1.14|                 21.48|\n|Census Tract 4.03; Butte  |                1|       74.80|        2.66|                 16.44|\n|Census Tract 4.04; Butte  |                1|       85.53|        0.00|                  8.65|\n|Census Tract 4; Colusa    |                1|       45.83|        1.99|                 48.89|\n|Census Tract 5.01; Butte  |                1|       66.67|        2.18|                 16.78|\n|Census Tract 5.02; Butte  |                1|       50.95|       11.75|                 27.41|\n|Census Tract 5; Colusa    |                1|       37.68|        4.89|                 53.05|\n|Census Tract 6.01; Butte  |                1|       75.90|        0.00|                 13.84|\n|Census Tract 6.03; Butte  |                1|       63.73|        2.63|                 16.62|\n|Census Tract 6.04; Butte  |                1|       63.20|        2.24|                 27.22|\n|Census Tract 7; Butte     |                1|       73.47|        0.17|                 20.62|\n|Census Tract 8; Butte     |                1|       80.08|        0.50|                 10.32|\n|Census Tract 9.01; Butte  |                1|       67.96|        0.00|                 15.17|\n|Census Tract 9.03; Butte  |                1|       69.37|        4.68|                 16.41|\n|Census Tract 9.04; Butte  |                1|       75.28|        0.15|                 18.50|\n\n\n:::\n:::\n\n\n# Part 4: Comprehensive Data Quality Evaluation\n\n## 4.1 MOE Analysis for Demographic Variables\n\n**Your Task:** Examine margins of error for demographic variables to see if some communities have less reliable data.\n\n**Requirements:** \n- Calculate MOE percentages for each demographic variable\n- Flag tracts where any demographic variable has MOE > 15% \n- Create summary statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate MOE percentages for white, Black, and Hispanic variables\n# Hint: use the same formula as before (margin/estimate * 100)\nCA_demo_moe <- CA_race_tract_clean %>%\n  mutate(\n    white_moe_pct = if_else(whiteE > 0, (whiteM / whiteE) * 100, NA_real_),\n    black_moe_pct = if_else(blackE > 0, (blackM / blackE) * 100, NA_real_),\n    hispanic_moe_pct = if_else(hispanicE > 0, (hispanicM / hispanicE) * 100, NA_real_)\n  ) %>%\n  mutate(\n    high_demo_moe_flag = ifelse(\n      white_moe_pct > 15 | black_moe_pct > 15 | hispanic_moe_pct > 15,\n      TRUE, FALSE\n    )\n  )\n\ndemo_moe_summary <- CA_demo_moe %>%\n  summarize(\n    total_tracts = n(),\n    tracts_with_issues = sum(high_demo_moe_flag, na.rm = TRUE),\n    percent_with_issues = (tracts_with_issues / total_tracts) * 100\n  )\n\ndemo_moe_summary %>% kable(caption = \"Tracts with High Demographic MOE (ACS 2022 5-year)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Tracts with High Demographic MOE (ACS 2022 5-year)\n\n| total_tracts| tracts_with_issues| percent_with_issues|\n|------------:|------------------:|-------------------:|\n|           61|                 61|                 100|\n\n\n:::\n:::\n\n\n## 4.2 Pattern Analysis\n\n**Your Task:** Investigate whether data quality problems are randomly distributed or concentrated in certain types of communities.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Group tracts by whether they have high MOE issues\n# Calculate average characteristics for each group:\n# - population size, demographic percentages\n\n# Use group_by() and summarize() to create this comparison\n# Create a professional table showing the patterns\n\n# Group tracts by whether they have high MOE issues\n# (Also create a severity measure to enable comparison)\nCA_demo_patterns <- CA_demo_moe %>%\n  mutate(\n    max_demo_moe_pct = pmax(white_moe_pct, black_moe_pct, hispanic_moe_pct, na.rm = TRUE),\n    moe_severity_group = ifelse(\n      max_demo_moe_pct >= median(max_demo_moe_pct, na.rm = TRUE),\n      \"Higher MOE Severity (>= median)\",\n      \"Lower MOE Severity (< median)\"\n    )\n  )\n\npattern_table <- CA_demo_patterns %>%\n  filter(!is.na(moe_severity_group))%>%\n  group_by(moe_severity_group) %>%\n  summarize(\n    tracts = n(),\n    avg_total_pop = mean(total_popE, na.rm = TRUE),\n    avg_pct_white = mean(pct_white, na.rm = TRUE),\n    avg_pct_black = mean(pct_black, na.rm = TRUE),\n    avg_pct_hispanic = mean(pct_hispanic, na.rm = TRUE),\n    avg_max_moe_pct = mean(max_demo_moe_pct, na.rm = TRUE),\n    .groups = \"drop\"\n  ) %>%\n  mutate(percent_of_tracts = (tracts / sum(tracts)) * 100)\n\npattern_table %>%\n  kable(caption = \"Pattern Analysis by Demographic MOE Severity (ACS 2022 5-year)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Pattern Analysis by Demographic MOE Severity (ACS 2022 5-year)\n\n|moe_severity_group              | tracts| avg_total_pop| avg_pct_white| avg_pct_black| avg_pct_hispanic| avg_max_moe_pct| percent_of_tracts|\n|:-------------------------------|------:|-------------:|-------------:|-------------:|----------------:|---------------:|-----------------:|\n|Higher MOE Severity (>= median) |     31|      3837.677|      68.74065|     0.7035484|         19.79129|       175.35955|          50.81967|\n|Lower MOE Severity (< median)   |     30|      3932.100|      62.47433|     2.3653333|         23.46033|        66.77432|          49.18033|\n\n\n:::\n:::\n\n\n**Pattern Analysis:** Since almost all the tracts have issue with high MOE in their ethnic groups, I only analyzed the data quality problem within the tracts that with MOE issues because there are only 2 tracts without MOE issues and this is not representative.\n\nI grouped g tracts with issues into higher-than-median-MOE and lower-than-median-MOE. The results show that data quality problems are not randomly distributed across communities. The higher MOE group has a slightly smaller average population than the lower MOE group. The average White percentage is almost the same in both groups, while the lower MOE group has a higher average Hispanic percentage and a higher average Black percentage. One tract has missing demographic MOE values due to zero population and was excluded from the pattern analysis.\n\n# Part 5: Policy Recommendations\n\n## 5.1 Analysis Integration and Professional Summary\n\n**Your Task:** Write an executive summary that integrates findings from\nall four analyses.\n\n**Executive Summary Requirements:** \n\n1. **Overall Pattern\nIdentification**: What are the systematic patterns across all your\nanalyses? \n\n2. **Equity Assessment**: Which communities face the greatest\nrisk of algorithmic bias based on your findings? \n\n3. **Root Cause Analysis**: What underlying factors drive both data quality issues and bias risk? \n\n4. **Strategic Recommendations**: What should the Department\nimplement to address these systematic issues?\n\n**Executive Summary:**\n\nOverall, the pattern suggests that data quality issues vary in geographic scales. At the county level, most counties show reliable median income estimates, but some rural counties have much higher margins of error. At the tract level, demographic data show very high MOE values in almost all tracts. When tracts are grouped by MOE severity, higher uncertainty is more common in smaller population tracts, which shows that data quality problems are not randomly\ndistributed.\n\nRural counties and small tracts face the biggest risk of uncertainty from algorithms. If algorithms use this data without fixing it first, these communities might get unfair decisions about resources. This creates more harm in places that already get less attention.\n\nThe main cause of data quality issues is the use of survey-based data at very small geographic scales. The American Community Survey relies on samples, and sample sizes become very small at the tract level, especially for specific racial or ethnic groups. When population counts are low, margins of error become large, which increases uncertainty.\n\nThe Department should use different approaches for different data quality levels. Areas with low MOE data can use regular algorithms. Areas with moderate MOE data should use algorithms carefully with extra reviews. Areas with high MOE data should rely on additional data sources or manual review of data quality and bias.\n\n## 6.3 Specific Recommendations\n\n**Your Task:** Create a decision framework for algorithm implementation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a summary table with county reliability information\nrecommendations <- CA_data_quality %>%\n  select(\n    county,\n    median_hh_incomeE,\n    income_moe_pct,\n    income_reliability\n  ) %>%\n# Add a new column with algorithm recommendations using case_when(): \n# - High Confidence: \"Safe for algorithmic decisions\" \n# - Moderate Confidence: \"Use with caution - monitor outcomes\" \n# - Low Confidence: \"Requires manual review or additional data\"\n  mutate(\n    algorithm_recommendation = case_when(\n      income_reliability == \"High Confidence\" ~ \"Safe for algorithmic decisions\",\n      income_reliability == \"Moderate Confidence\" ~ \"Use with caution - monitor outcomes\",\n      income_reliability == \"Low Confidence\" ~ \"Requires manual review or additional data\",\n      TRUE ~ NA_character_\n    )\n  )\n\n# Format as a professional table\nrecommendations %>%\n  kable(\n    col.names = c(\"County\", \"Median Income\", \"MOE (%)\", \"Reliability Category\", \"Algorithm Recommendation\"),\n    caption = \"Decision Framework for Algorithm Implementation (ACS 2022 5-year)\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Decision Framework for Algorithm Implementation (ACS 2022 5-year)\n\n|County          | Median Income|    MOE (%)|Reliability Category |Algorithm Recommendation                  |\n|:---------------|-------------:|----------:|:--------------------|:-----------------------------------------|\n|Alameda         |        122488|  1.0049964|High Confidence      |Safe for algorithmic decisions            |\n|Alpine          |        101125| 17.2479604|Low Confidence       |Requires manual review or additional data |\n|Amador          |         74853|  8.0798365|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Butte           |         66085|  3.4213513|High Confidence      |Safe for algorithmic decisions            |\n|Calaveras       |         77526|  4.9983231|High Confidence      |Safe for algorithmic decisions            |\n|Colusa          |         69619|  8.2520576|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Contra Costa    |        120020|  1.2464589|High Confidence      |Safe for algorithmic decisions            |\n|Del Norte       |         61149|  7.1562904|Moderate Confidence  |Use with caution - monitor outcomes       |\n|El Dorado       |         99246|  3.3552990|High Confidence      |Safe for algorithmic decisions            |\n|Fresno          |         67756|  1.4271799|High Confidence      |Safe for algorithmic decisions            |\n|Glenn           |         64033|  6.1889963|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Humboldt        |         57881|  3.6816917|High Confidence      |Safe for algorithmic decisions            |\n|Imperial        |         53847|  4.1116497|High Confidence      |Safe for algorithmic decisions            |\n|Inyo            |         63417|  8.5986407|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Kern            |         63883|  2.0741042|High Confidence      |Safe for algorithmic decisions            |\n|Kings           |         68540|  3.2871316|High Confidence      |Safe for algorithmic decisions            |\n|Lake            |         56259|  4.3353064|High Confidence      |Safe for algorithmic decisions            |\n|Lassen          |         59515|  5.9665631|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Los Angeles     |         83411|  0.5263095|High Confidence      |Safe for algorithmic decisions            |\n|Madera          |         73543|  3.8671254|High Confidence      |Safe for algorithmic decisions            |\n|Marin           |        142019|  2.8855294|High Confidence      |Safe for algorithmic decisions            |\n|Mariposa        |         60021|  8.8185802|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Mendocino       |         61335|  3.5835983|High Confidence      |Safe for algorithmic decisions            |\n|Merced          |         64772|  3.3069845|High Confidence      |Safe for algorithmic decisions            |\n|Modoc           |         54962|  9.8049562|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Mono            |         82038| 18.7571613|Low Confidence       |Requires manual review or additional data |\n|Monterey        |         91043|  2.0869260|High Confidence      |Safe for algorithmic decisions            |\n|Napa            |        105809|  2.8173407|High Confidence      |Safe for algorithmic decisions            |\n|Nevada          |         79395|  4.8151647|High Confidence      |Safe for algorithmic decisions            |\n|Orange          |        109361|  0.8065032|High Confidence      |Safe for algorithmic decisions            |\n|Placer          |        109375|  1.6969143|High Confidence      |Safe for algorithmic decisions            |\n|Plumas          |         67885| 11.4487737|Low Confidence       |Requires manual review or additional data |\n|Riverside       |         84505|  1.2555470|High Confidence      |Safe for algorithmic decisions            |\n|Sacramento      |         84010|  0.9713129|High Confidence      |Safe for algorithmic decisions            |\n|San Benito      |        104451|  5.2282889|Moderate Confidence  |Use with caution - monitor outcomes       |\n|San Bernardino  |         77423|  1.0410343|High Confidence      |Safe for algorithmic decisions            |\n|San Diego       |         96974|  1.0239858|High Confidence      |Safe for algorithmic decisions            |\n|San Francisco   |        136689|  1.4295225|High Confidence      |Safe for algorithmic decisions            |\n|San Joaquin     |         82837|  1.7480112|High Confidence      |Safe for algorithmic decisions            |\n|San Luis Obispo |         90158|  2.5632778|High Confidence      |Safe for algorithmic decisions            |\n|San Mateo       |        149907|  1.7484174|High Confidence      |Safe for algorithmic decisions            |\n|Santa Barbara   |         92332|  2.0458779|High Confidence      |Safe for algorithmic decisions            |\n|Santa Clara     |        153792|  1.0046036|High Confidence      |Safe for algorithmic decisions            |\n|Santa Cruz      |        104409|  3.0390100|High Confidence      |Safe for algorithmic decisions            |\n|Shasta          |         68347|  3.6285426|High Confidence      |Safe for algorithmic decisions            |\n|Sierra          |         61108| 15.1158604|Low Confidence       |Requires manual review or additional data |\n|Siskiyou        |         53898|  4.8981409|High Confidence      |Safe for algorithmic decisions            |\n|Solano          |         97037|  1.7766419|High Confidence      |Safe for algorithmic decisions            |\n|Sonoma          |         99266|  2.0026998|High Confidence      |Safe for algorithmic decisions            |\n|Stanislaus      |         74872|  1.8311251|High Confidence      |Safe for algorithmic decisions            |\n|Sutter          |         72654|  4.7141245|High Confidence      |Safe for algorithmic decisions            |\n|Tehama          |         59029|  6.9508208|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Trinity         |         47317| 12.4479574|Low Confidence       |Requires manual review or additional data |\n|Tulare          |         64474|  2.3094581|High Confidence      |Safe for algorithmic decisions            |\n|Tuolumne        |         70432|  6.6603249|Moderate Confidence  |Use with caution - monitor outcomes       |\n|Ventura         |        102141|  1.4959713|High Confidence      |Safe for algorithmic decisions            |\n|Yolo            |         85097|  2.7415773|High Confidence      |Safe for algorithmic decisions            |\n|Yuba            |         66693|  4.1923440|High Confidence      |Safe for algorithmic decisions            |\n\n\n:::\n:::\n\n\n**Key Recommendations:**\n\n**Your Task:** Use your analysis results to provide specific guidance to the department.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhigh_conf_counties <- recommendations %>%\n  filter(income_reliability == \"High Confidence\") %>%\n  arrange(income_moe_pct) %>%\n  pull(county)\nhigh_conf_counties_text <- paste(high_conf_counties, collapse = \", \")\n```\n:::\n\n\n1.  **Counties suitable for immediate algorithmic implementation:**\n    Los Angeles, Orange, Sacramento, Santa Clara, Alameda, San Diego, San Bernardino, Contra Costa, Riverside, Fresno, San Francisco, Ventura, Placer, San Joaquin, San Mateo, Solano, Stanislaus, Sonoma, Santa Barbara, Kern, Monterey, Tulare, San Luis Obispo, Yolo, Napa, Marin, Santa Cruz, Kings, Merced, El Dorado, Butte, Mendocino, Shasta, Humboldt, Madera, Imperial, Yuba, Lake, Sutter, Nevada, Siskiyou, Calaveras\n    \n\n::: {.cell}\n\n```{.r .cell-code}\nmoderate_conf_counties <- recommendations %>%\n  filter(income_reliability == \"Moderate Confidence\") %>%\n  arrange(income_moe_pct) %>%\n  pull(county)\nmoderate_conf_counties_text <- paste(moderate_conf_counties, collapse = \", \")\n```\n:::\n\n\n2.  **Counties requiring additional oversight:** \nSan Benito, Lassen, Glenn, Tuolumne, Tehama, Del Norte, Amador, Colusa, Inyo, Mariposa, Modoc\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlow_conf_counties <- recommendations %>%\n  filter(income_reliability == \"Low Confidence\") %>%\n  arrange(desc(income_moe_pct)) %>%\n  pull(county)\nlow_conf_counties_text <- paste(low_conf_counties, collapse = \", \")\n```\n:::\n\n\n3.  **Counties needing alternative approaches:** \nMono, Alpine, Sierra, Trinity, Plumas\n\n## Questions for Further Investigation\n\n1. Do MOE values show spatial clustering when measured with Moran’s I, or are high and low MOE tracts randomly distributed?\n\n2. Are data quality problems related to other community characteristics, such as immigrant population?\n\n# Technical Notes\n\n**Data Sources:** - U.S. Census Bureau, American Community Survey 2018-2022 5-Year Estimates - Retrieved via tidycensus R package on 2/2/2026\n\n**Reproducibility:** - All analysis conducted in R version 4.3.1 - Census API key required for replication - Complete code and documentation available at: https://vrnczay.github.io/CPLN-5920-Portfolio/\n\n**Methodology Notes:** I used ACS 2022 five year estimates at the county level to compare median household income reliability, and I calculated MOE percent as MOE divided by estimate times 100. I created reliability categories based on MOE percent and used these categories to guide the county level interpretation.\n\nFor the tract level study, I randomly selected one county from each reliability category and used set.seed so the selection stayed the same every time I ran the code. This may affect reproductivity when other people use my code since they may not randomly generate the same county as mine.\n\n**Limitations:** ACS data are survey estimates, so uncertainty can be high, especially at the tract level and for smaller racial or ethnic groups. Almost all tracts had high MOE values for at least one groups, so comparison between tracts with MOE issue and without is unrealistic in CA. So, I used MOE severity groups instead. \n\nThis analysis only covers California and one ACS time period, so the findings may not generalize to other states or years.\n\nThe results also depend on the given thresholds for reliability categories.\n\n------------------------------------------------------------------------\n\n## Submission Checklist\n\nBefore submitting your portfolio link on Canvas:\n\n-   [ ] All code chunks run without errors\n-   [ ] All \"[Fill this in]\" prompts have been completed\n-   [ ] Tables are properly formatted and readable\n-   [ ] Executive summary addresses all four required components\n-   [ ] Portfolio navigation includes this assignment\n-   [ ] Census API key is properly set\n-   [ ] Document renders correctly to HTML\n\n**Remember:** Submit your portfolio URL on Canvas, not the file itself. Your assignment should be accessible at\n`your-portfolio-url/labs/lab_1/your_file_name.html`\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}